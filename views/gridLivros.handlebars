<script>
    function getInfo(ID) {
        const url = `/info/${ID}`;

        return $.ajax({
            url: url,
            method: 'GET',
            dataType: 'json'
        });

        
    }
</script>

<div class="d-flex justify-content-end">
    <a href="/livro" type="button" class="btn btn-success mt-4 mr-2">Novo</a>
</div>
<div>
    <h2 class="mb-3">Cadastro de Livros</h2>
</div>

<div class="container">
    <table class="table table-hover table-striped">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Título</th>
                <th scope="col">Categoria </th>
            </tr>
        </thead>
        <tbody>
            {{#each livros}}
            <tr>
                <td> {{dataValues.id}}</td>
                <td>{{dataValues.titulo}}</td>
                <td>{{dataValues.categoria}}</td>
                <td><a href="/info/:id" type="button" class="btn btn-primary" data-toggle="modal"
                        data-target="#exampleModal">Info</a></td>
                <td class="d-flex justify-content-end"><a href="/deletar/{{dataValues.id}}"><svg
                            xmlns="http://www.w3.org/2000/svg" height="1em"
                            viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                            <style>
                                svg {
                                    fill: #000000
                                }
                            </style>
                            <path
                                d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z" />
                        </svg></a></td>
            </tr>
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Informações:</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body form-row">
                            <label class="col-md-3" for="titulo">Titulo:</label>
                            <span class="col-md-3" aria-hidden="true">{{dataValues.titulo}}</span>

                            <label class="col-md-3" for="editora">Editora:</label>
                            <span class="col-md-3" aria-hidden="true">{{dataValues.editora}}</span>

                            <label class="col-md-3" for="categoria">Categoria:</label>
                            <span class="col-md-3" aria-hidden="true">{{dataValues.categoria}}</span>

                            <label class="col-md-3" for="autor">Autor:</label>
                            <span class="col-md-3" aria-hidden="true">{{dataValues.autor}}</span>

                            <label class="col-md-4" for="qtdAutores">Quantidade Autores:</label>
                            <span class="col-md-1" aria-hidden="true">{{dataValues.qtdAutores}}</span>

                            <label class="col-md-5" for="dataLancamento">Data de Lançamento:</label>
                            <span class="col-md-2" aria-hidden="true">{{dataValues.dataLancamento}}</span>

                            <label class="col-md-5" for="paginas">Quantidade de Páginas:</label>
                            <span class="col-md-2" aria-hidden="true">{{dataValues.paginas}}</span>

                            <label class="col-md-3" for="classificação">Classificação:</label>
                            <span class="col-md-2" aria-hidden="true">{{dataValues.classificacao}}</span>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            {{/each}}

        </tbody>
    </table>
    <div class="d-flex justify-content-end">
        <a href="/home" type="button" class="btn btn-secondary mt-2">Voltar</a>
    </div>
</div>